一、创建块设备
rbd create rbd1 --size 1024
rbd map rbd1
rbd showmapped
mkfs.ext4 -q /dev/rbd0
mkdir /mnt/ceph
mount /dev/rbd0 /mnt/ceph

二、自动挂载
1、设置开机ceph自动map和mount rbd块设备
vim /etc/ceph/rbdmap
#poolname/imagename id=client,keyring=/etc/ceph/ceph.client.keyring
rbd/rbd1 id=admin,keyring=/etc/ceph/ceph.client.admin.keyring

2、vim /etc/fstab
/dev/rbd/rbd/rbd1 /mnt/ceph ext4 defaults,noatime,_netdev


三、块扩容
rbd resize rbd/rbd1 --size 2048
文件系统在线扩容
resize2fs /dev/rbd0

四、块删除
umount /mnt/ceph
vim /etc/ceph/rbdmap
注释 rbd/rbd1 id=admin,keyring=/etc/ceph/ceph.client.admin.keyring
vim /etc/fstab
注释 /dev/rbd/rbd/rbd1 /mnt/ceph ext4 defaults,noatime,_netdev
rbd rm rbd1
